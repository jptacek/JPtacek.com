<!DOCTYPE html>
<html>
<head>
    <!-- Meta -->
    <meta charset="utf-8"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

    <meta name="description" content="Mobile, Web and JavaScript" />

<title>WebMatrix Proves an Excellent Tool for Creating Small Sites Quickly - JPtacek.com | Musings on code and who knows what 3ls3</title>
    <meta name="generator" content="DocPad v6.78.4" />
    

    <meta name="author" content="John Ptacek">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/styles/chemistry.css" rel="stylesheet" />
    <link href="/styles/site.css" rel="stylesheet" />
    <link href="/css/highlight.css" rel="stylesheet" />
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

</head>
<body>

<a href="https://plus.google.com/+JohnPtacek?rel=author" class="google googleplus-hidden" title="Google+">Google+</a>



<div class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">John Ptacek</a> <div class="navbar-brand"> - Musings on Code</div>
        </div>
        <div class="collapse navbar-collapse navbar-right">
            <ul class="nav navbar-nav">
                <!--<li><a href="/">Blog</a></li>-->
                
                    <li><a href="/archives/">Archives</a></li>
                
                    <li><a href="/about/">About</a></li>
                
                <li class="hidden-xs">
                    <a href="/feed/index.xml" class="rss"><i class="fa fa-rss fa-lg"></i></a>
                    <a href="https://twitter.com/jptacek" class="twitter"><i class="fa fa-twitter fa-lg"></i></a>
                    <a href="https://plus.google.com/+johnptacek" class="googleplus"><i class="fa fa-google-plus fa-lg"></i></a>
                    <a href="https://linkedin.com/in/johnptacek" class="linkedin"><i class="fa fa-linkedin fa-lg"></i></a>
                    <a href="https://stackoverflow.com/users/39797/john-ptacek" class="stackoverflow"><i class="fa fa-stack-overflow fa-lg"></i></a>
                    <a href="https://github.com/jptacek" class="github"><i class="fa fa-github fa-lg"></i></a>
                </li>
            </ul>
            <form class="navbar-form navbar-right hidden-xs" role="search" action="https://google.com/search"
                  method="get">
                <div class="form-group">
                    <input type="search" name="q" class="form-control" placeholder="Search">
                    <input type="hidden" name="q" value="site:jptacek.com">
                </div>
            </form>
        </div>
    </div>
</div>

<div class="container">
            <article class="post">
    
    <h1>WebMatrix Proves an Excellent Tool for Creating Small Sites Quickly</h1>
    
        <div class="post-date">Jun 6th, 2011</div>

    <div class="post-content">
        <p>As our work on the <a href="http://www.appletoncompassion.org/">Appleton Compassion Project</a> was wrapping up, 
Skyline took over ownership of the database that runs the site from the School District so we could easily 
make corrections and additions without having to download a new version of the database each night. 
Now that we &quot;owned&quot; the database, we realized we needed a way to maintain and manage it. 
For this we used Microsoft&#39;s new tool, <a href="http://www.asp.net/WebMatrix">WebMatrix</a>.</p>
<p>Right about now you are asking yourself, really, another programming tool? An excellent question. 
WebMatrix is a response from Microsoft to Ruby on Rails and PHP. The benefit these development stacks 
is that they can generally be used to implement data driven sites relatively quickly and, until now, 
Microsoft didn&#39;t have a tool that allowed that.</p>
<p>While the .NET stack is a great development platform, it doesn&#39;t always allow for quick website development. 
As developers we tend to over-engineer sites, especially the ones that only need to be a couple of pages. 
We create a data layer, we create a business layer, and then we create a UI layer. These are, of course, 
industry best practices, but they are industry best practices for sites that are going to scale. 
If you&#39;re building a site for a couple of users who just want to see a list of their child&#39;s soccer 
games, this is definitely over engineering. WebMatrix is Microsoft&#39;s answer to that.</p>
<p>WebMatrix harkens back to the days of Classic ASP. It contains code logic in a single page, including the 
SQL statement. You can then render your page using Microsoft&#39;s 
new <a href="http://www.computerworld.com/s/article/9178910/Microsoft_sharpening_Razor_view_engine_for_ASP.Net?source=rss_news">Razor</a> engine.</p>
<p><strong>Getting Started
</strong>To get started, <a href="http://www.asp.net/webmatrix">download WebMatrix </a> using Microsoft&#39;s web platform installer. 
Upon starting up the application you&#39;ll see a nice, simple-to-use page that includes many templates you can 
use to get started with your development quickly and easily.</p>
<p>So, what does the code look like? Truthfully, it&#39;s really simple. Here is the basis of a page we used to 
create a list of all students participating in the Compassion Project.</p>
<p>The first thing to realize is the <code>@{ }</code> syntax is part of the Razor view engine. It is the replacement 
for <code>&lt;%= %&gt;</code> that tells the runtime you are escaping out to do something code like. Essentially, to get 
our list of data we do three things ... open a database connection, tell it the SQL command, and execute the 
SQL statement, the same three things we always do. In this case however, those three things are three lines:</p>
<pre class="highlight"><code class="hljs xml">@{
    var db=Database.Open("Dev");
    var sqlQuery = "select * from ProjectData order by LastName, FirstName";
    var data = db.Query(sqlQuery);
}
</code></pre>
<p>Next we have to render the output to the page. Again, we rely on the Razor View engine 
(look for the @ symbol):</p>
<pre class="highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ul</span>&gt;</span>
        @foreach (var row in data) {
            <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"EditArtist.cshtml?id=@row.PictureNumber"</span>&gt;</span>@row.PictureNumber<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span> @row.LastName @row.FirstName<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
        }
    <span class="hljs-tag">&lt;/<span class="hljs-title">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
</code></pre>
<p>We are essentially saying for each (@foreach is Razor syntax) row in our data set (data is a globally scoped variable on the page), create a link to a key (@ is again the Razor syntax, so @row.PictureNumber tells the page to use the picture number) and create hypertext for the person&#39;s name. That&#39;s it! As you can see from the code snippets above, it takes very few lines to get data from a database.</p>
<p>The update part is also similar. It is, of course, longer since there is a bit more logic, but notice how all of the syntax is on a single page:</p>
<pre class="highlight"><code class="hljs xml">@{
    var id = Request["ID"];
    var sqlSelect = "select Id, PictureNumber, LastName, FirstName, Grade, HomeSchool, TileLocation,IsNull(DisplayStudentOnline,1) as DisplayStudentOnline,IsNull(FeaturedImage,0) as FeaturedImage,IsNull(FeaturedStatement,0) as FeaturedStatement,Description from ProjectData where PictureNumber=@0";
    var db=Database.Open("Dev");
    var sqlQuery = db.QuerySingle(sqlSelect,id);
    var studentFirstName = sqlQuery.FirstName;
    var studentLastName = sqlQuery.LastName;
    var compassionStatement = sqlQuery.Description;
    var homeSchool = sqlQuery.HomeSchool;
    var tileLocation = sqlQuery.TileLocation;
    var displayOnline = sqlQuery.DisplayStudentOnline;
    var isFeaturedImage = sqlQuery.FeaturedImage;
    var isFeaturedStatement = sqlQuery.FeaturedStatement;
    var pictureID = sqlQuery.PictureNumber;
    var imageUrl = "http://images.appletoncompassion.org/compassionimagesfull/thumb/" + @pictureID + ".jpg";
    var isImageCheck = string.Empty;

    if (isFeaturedImage) {
        isImageCheck = "checked";
    }

    var isStatementCheck = "";

    if (isFeaturedStatement) {
        isStatementCheck = "checked";
    }

    var displayOnlineCheck = "";
    if (displayOnline) {
        displayOnlineCheck = "checked";
    }

    var ischeckedonpost = string.Empty;

    if (IsPost) {
        compassionStatement = Request["statement"];
        tileLocation = Request["tileLoc"]
        displayOnline = ParseCheckBox(Request["displayOnline"]);
        isFeaturedImage = ParseCheckBox(Request["chkFeaturedImage"]);
        isFeaturedStatement = ParseCheckBox(Request["chkFeaturedStatement"]);
        var sqlUpdate = "Update ProjectData set description = @0, TileLocation=@1, DisplayStudentOnline=@2, FeaturedImage=@3,FeaturedStatement=@4 where pictureNumber=@5";
        db.Execute(sqlUpdate,compassionStatement,tileLocation,displayOnline,isFeaturedImage,isFeaturedStatement,pictureID);
        Response.Redirect("Page.cshtml");
    }
}

@functions {

bool ParseCheckBox(string checkBoxValue) {
    Response.Write("Value in: " + checkBoxValue +"<span class="hljs-tag">&lt;/<span class="hljs-title">br</span>&gt;</span>");
    bool returnValue = false;

    if (checkBoxValue == "on") {
        returnValue = true;
    }
    else {
        returnValue = false;
    }

    Response.Write("Value out: " + returnValue +"<span class="hljs-tag">&lt;/<span class="hljs-title">br</span>&gt;</span>");
    return returnValue;
    }
}

<span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">html</span> <span class="hljs-attribute">lang</span>=<span class="hljs-value">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Edit Artist<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"Page.cshtml"</span>&gt;</span>Home Page<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">action</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">method</span>=<span class="hljs-value">"post"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Picture Number: @pictureID<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>First Name: @studentFirstName<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Last Name: @studentLastName<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Home School: @homeSchool<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Tile Location: <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"tileLoc"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"@tileLocation"</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Statement:<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">textarea</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"txtStatement"</span> <span class="hljs-attribute">rows</span>=<span class="hljs-value">"10"</span> <span class="hljs-attribute">columns</span>=<span class="hljs-value">"20"</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"width:600px"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"statement"</span>&gt;</span>@compassionStatement<span class="hljs-tag">&lt;/<span class="hljs-title">textarea</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Display Student Online <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"checkbox"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"displayOnline"</span> @<span class="hljs-attribute">displayOnlineCheck</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Featured Art <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"checkbox"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"chkFeaturedImage"</span> @<span class="hljs-attribute">isImageCheck</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Featured Statement<span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"checkbox"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"chkFeaturedStatement"</span> @<span class="hljs-attribute">isStatementCheck</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"@imageUrl"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"submit"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"Save"</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre>
<p><strong>Why Use it?
</strong>WebMatrix is Microsoft&#39;s response to tools such as Ruby and PHP that generally use inline SQL and allow developers to quickly get sites published. It includes many templates so you can get started quickly, and it will tie into Open Source projects such as Joomla.</p>
<p><strong>I want to learn more!
</strong><a href="http://www.asp.net/webmatrix">Official WebMatrix Site</a></p>
<p>WebMatrix Development 101</p>
<p><a href="http://www.amazon.com/Web-Development-using-WebMatrix-ebook/dp/B004I6D676/ref=sr_1_2?ie=UTF8&amp;qid=1305890052&amp;sr=8-2">Web Matrix 101 book</a> - This is a nice little introduction and is only $1 for the Kindle.</p>

    </div>

    
    <div class="post-tags">
        Posted In: <a href='/tags/appleton-compassion/'>Appleton Compassion</a>, <a href='/tags/skyline-technologies/'>Skyline Technologies</a>, <a href='/tags/web/'>Web</a>, <a href='/tags/webmatrix/'>WebMatrix</a>
    </div>
    
    <br/>
    Help improve this blog by submitting a <a href="https://github.com/jptacek/JPtacek.com/edit/master/src/documents/2011/06/webmatrix-proves-an-excellent-tool-for-creating-small-sites-quickly/index.html.md">pull request.</a><br />

    <p>&nbsp;</p>

</article>
            <div id="me">
    <p>
        <img src="/images/Headshot-Square.png" alt="John Ptacek" />
        I'm <b>John Ptacek</b>, a software developer for <a href="http://www.SkylineTechnologies.com">Skyline Technologies</a>.
        This blog is my contains my content and opinions, which are not those of my employer.
    </p>
    <p>Currently, I am reading 
        <a href="https://www.goodreads.com/book/show/567704.Imajica">Imajica</a>
        by <a href="http://www.clivebarker.info">Clive Barker</a></p>
    <p>
        <a href="https://twitter.com/jptacek">@jptacek</a> &#8226;
        <a href="https://github.com/jptacek">GitHub</a> &#8226;
        <a href="https://www.linkedin.com/in/JohnPtacek/">LinkedIn</a> &#8226;
        <a href="https://stackoverflow.com/users/39797/john-ptacek">Stack Overflow</a> &#8226;
        <a href="https://plus.google.com/+JohnPtacek">Google+</a>
    </p>
</div>

            <div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments.</a></noscript></div>
<script type="text/javascript">
    var disqus_shortname = 'jptacek';
    var disqus_url = 'http://www.jptacek.com/2011/06/webmatrix-proves-an-excellent-tool-for-creating-small-sites-quickly/';
    var disqus_identifier = disqus_url;
    var disqus_title = 'WebMatrix Proves an Excellent Tool for Creating Small Sites Quickly';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

</div>

<div class="container">
    <div class="navbar navbar-footer">
        <p class="navbar-center navbar-text">Content copyright &copy; 2016 John Ptacek</p>
    </div>
</div>



    <script type="text/javascript" src="/vendor/angular/angular.min.js"></script>
    <script type="text/javascript" src="/vendor/angular-route/angular-route.min.js"></script>
    <script type="text/javascript" src="/vendor/angular-animate/angular-animate.min.js"></script>

 

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <script src="/scripts/site.js"></script>



    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34910017-1']);
    _gaq.push(['_setDomainName', 'jptacek.com']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>

</body>
</html>
